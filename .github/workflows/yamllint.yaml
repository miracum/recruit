# For some reason megalinter ignores the yamllint config
# and attempts to lint charts/recruit/templates causing
# it to fail constantly. So we run yamllint as a dedicated step
# instead.
name: yamllint

on:
  pull_request:
    branches:
      - master
  push:
    branches:
      - master

permissions: read-all

jobs:
  yamllint:
    runs-on: ubuntu-22.04
    # contains yamllint
    container: ghcr.io/chgl/kube-powertools:v1.23.7@sha256:9fbd9806165d2d62a555ada53d458cd9e1b6595787b69b688f235b1fdaaba141
    steps:
      - name: Checkout
        uses: actions/checkout@8e5e7e5ab8b370d6c329ec480221332ada57f0ab # v3.5.2

      - name: Run yamllint
        run: yamllint -c .yamllint.yaml .
